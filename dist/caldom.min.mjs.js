export default(function(){var t=window,i=Array.prototype,w=i.slice,n=t.Node.prototype,r=n.appendChild,o=n.insertBefore,d="isConnected"in Node.prototype?function(t){return t.isConnected}:function(t){return!(t.ownerDocument.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_DISCONNECTED)},p=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||function(t){return setTimeout(t,1e3/60)};t.Element.prototype.matches=t.Element.prototype.matches||t.Element.prototype.webkitMatchesSelector||t.Element.prototype.t||t.Element.prototype.msMatchesSelector||t.Element.prototype.oMatchesSelector;function y(t,n,i){this.init(t,n,i)}function _(t,n,i){if(t){if(t.i&&(t=t.i),!n)return i.appendChild(t);var r=1==t.nodeType;if(r&&t.tagName==n.tagName&&t._h===n._h&&t.getAttribute("caldom-v")===n.getAttribute("caldom-v")){var o=!0;if(!t.isEqualNode(n)){i=t.hasChildNodes();if(i||n.hasChildNodes()){var u=n.childNodes,e=0;if(i)for(var o=!1,f=w.call(t.childNodes),s=f.length;e<s;e++){var h=_(f[e],u[e],n);h&&h._h&&(h._h.elems[0]=h)}for(;e<u.length;e++){var c,a=u[e];(c=null!=a._h)&&a._h.o(),n.removeChild(a),e--,c&&a._h.u()}}if(!t.isEqualNode(n)){for(var v=0,l=t.attributes.length;v<l;v++){var d=t.attributes[v];n.getAttribute(d.name)!=d.value&&n.setAttribute(d.name,d.value)}for(var p=0;p<n.attributes.length;p++){var y=n.attributes[p];t.hasAttribute(y.name)||(n.removeAttribute(y.name),p--)}}}!function t(n,i,r){if(Object.getPrototypeOf(i).hasOwnProperty("value")&&(i.value!=n.value&&(i.value=n.value),i.checked!=n.checked&&(i.checked=n.checked),i.indeterminate!=n.indeterminate&&(i.indeterminate=n.indeterminate)),i.selected!=n.selected&&(i.selected=n.selected),i._data!=n._data&&(i._data=n._data),r)for(var o=w.call(n.children),u=w.call(i.children),e=0,f=o.length;e<f;e++)t(o[e],u[e])}(t,n,o)}else if(!t.isEqualNode(n)){if(r)return(c=null!=n._h)&&n._h.o(),n.parentNode.replaceChild(t,n),c&&n._h.u(),t;n.nodeValue=t.nodeValue}}}function u(t,n,i){n instanceof y&&(n=n.elems[0]);for(var r=0,o=t.length;r<o;r++){var u=t[r];if(u){var e=!!u.elems,f=e?(u.h(),u.v||u.elems):v(u)?u:[u],s=this.elems[0];void 0===n&&(n=s.firstChild);for(var h=0,c=f.length;h<c;h++){var a=f[h];a&&("object"!=typeof a&&(a=this._w.document.createTextNode(a)),i.call(s,a,n))}e&&(u.v=null,u.l())}}return this}function e(t,n){n=n||window.document;var i=(t=t.trim())[0];if("+"==i)return[n.createElement(t.substr(1))];if("$"!=i)return"<"==i?w.call(n.createRange().createContextualFragment(t).childNodes):"~"==i?[n.createElementNS("http://www.w3.org/2000/svg",t.substr(1))]:w.call(n.querySelectorAll(t));for(var r=(n.ownerDocument||n).evaluate(t.substr(1),n,null,0,null),o=[],u=r.iterateNext();u;)o.push(u),u=r.iterateNext();return o}function f(t){return Array.isArray(t)?t:t.split(" ")}function v(t){return Array.isArray(t)||t&&"string"!=typeof t&&null!=t.length&&!(t instanceof Node)}function s(t){for(var n=0,i=this.elems.length;n<i&&!1!==t.call(this.elems[n],this.elems[n],n);n++);return this}function h(i,r,t){if(t||"string"==typeof i){if(null==r)return this.map(function(t){return t[i]});Array.isArray(r)?this.each(function(t,n){t[i]=r[n]}):this.each(function(t){t[i]=r})}else this.each(function(t){for(var n in i)t[n]=i[n]});return this}function c(i,r){if("string"!=typeof i)this.each(function(t){for(var n in i)t.style[n]=i[n]});else{if(null==r)return this.map(function(t){return t.style[i]});Array.isArray(r)?this.each(function(t,n){t.style[i]=r[n]}):this.each(function(t){t.style[i]=r})}return this}function a(i,r){if("string"!=typeof i)this.each(function(t){for(var n in i)t.setAttribute(n,i[n])});else{if(2!=arguments.length)return this.map(function(t){return t.getAttribute(i)});Array.isArray(r)?this.each(function(t,n){t.setAttribute(i,r[n])}):this.each(function(t){t.setAttribute(i,r)})}return this}function l(t,n){for(var i=0,r=n.length;i<r;i++)t.classList.add(n[i])}function m(n){return this.each(function(t){l(t,f(n))}),this}function g(t,n){for(var i=0,r=n.length;i<r;i++)t.classList.remove(n[i])}function A(t){var n=f(t);return this.each(function(t){g(t,n)}),this}function b(t){for(var n=[],i=0,r=this.elems.length;i<r;i++)n.push(t(this.elems[i],i));return n}function x(n){var t=this.map(function(t){return w.call(e(n,t))});return new y(i.concat.apply([],t),void 0,this._w)}y.prototype={_w:void 0,elems:[],watched:void 0,p:{},_:0,m:function(){this.each=s,this.map=b,this.find=x,this.prop=h,this.attr=a,this.css=c,this.addClass=m,this.removeClass=A},init:function(t,n,i){return this._w=i||window,t&&(v(t)?this.elems=w.call(t):this.elems="object"==typeof t?[t]:e(t,this._w.document),1!=this.elems.length&&this.m()),n&&v(n)&&u.call(this,n,null,r),this},find:function(t){return new y(e(t,this.elems[0]),void 0,this._w)},eq:function(t){return new y(this.elems[t<0?this.elems.length+t:t],void 0,this._w)},parent:function(r){var o=this,u=[];return r&&"number"!=typeof r?this.each(function(t){for(var n=t.parentNode,i=n==o._w.document;!i&&!n.matches(r);)i=(n=n.parentNode)==o._w.document;i||u.push(n)}):this.each(function(t){for(var n=t.parentNode,i=0;i<r;i++)n=n.parentNode;u.push(n)}),new y(u,void 0,this._w)},children:function(u){var e=[];return this.each(function(t){for(var n=w.call(t.childNodes),i=0,r=n.length;i<r;i++){var o=n[i];(!u||o.matches&&o.matches(u))&&e.push(o)}}),new y(e,void 0,this._w)},each:function(t){t.call(this.elems[0],this.elems[0],0)},map:function(t){return[t(this.elems[0],0)]},html:function(t){return this.prop("innerHTML",t,!0)},text:function(t){return this.prop("textContent",t,!0)},val:function(t){return this.prop("value",t,!0)},attr:function(t,n){if("string"!=typeof t)for(var i in t)this.elems[0].setAttribute(i,t[i]);else{if(2!=arguments.length)return[this.elems[0].getAttribute(t)];Array.isArray(n)?this.elems[0].setAttribute(t,n[0]):this.elems[0].setAttribute(t,n)}return this},prop:function(t,n,i){if(i||"string"==typeof t){if(null==n)return[this.elems[0][t]];Array.isArray(n)?this.elems[0][t]=n[0]:this.elems[0][t]=n}else for(var r in t)this.elems[0][r]=t[r];return this},data:function(i,r){return null==r?this.map(function(t){if(t._data)return t._data[i]}):(Array.isArray(r)?this.each(function(t,n){t._data||(t._data={}),t._data[i]=r[n]}):this.each(function(t){t._data||(t._data={}),t._data[i]=r}),this)},css:function(t,n){if("string"!=typeof t)for(var i in t)this.elems[0].style[i]=t[i];else{if(null==n)return[this.elems[0].style[t]];Array.isArray(n)?this.elems[0].style[t]=n[0]:this.elems[0].style[t]=n}return this},addClass:function(t){t=f(t);return l(this.elems[0],t),this},removeClass:function(t){return g(this.elems[0],f(t)),this},show:function(t){return this.css("display",t||"block")},hide:function(){return this.css("display","none")},on:function(t,r,o){var u=f(t);return this.each(function(t){for(var n=0,i=u.length;n<i;n++)t.addEventListener(u[n],r,o)}),this},off:function(t,r,o){var u=f(t);return this.each(function(t){for(var n=0,i=u.length;n<i;n++)t.removeEventListener(u[n],r,o)}),this},append:function(t){return u.call(this,v(t)?t:arguments,null,r)},prepend:function(t,n){return u.call(this,v(t)?t:[t],n,o)},remove:function(){return this.o(!0),this.each(function(t){t.parentNode.removeChild(t)}),this.elems=[],this.m(),this.u(!0),this},replace:function(i){return this.each(function(t,n){n=i(t,n,this);_(n=n instanceof y?n.elems[0]:n,t,t)}),this},h:function(){(this.render||this.update)&&(this.willMount&&!this.g&&this.willMount(this),this.react(void 0,void 0,void 0,void 0,void 0,!0))},l:function(){var t=1==this.g;this.g=!0,this.didMount&&!t&&this.didMount(this)},o:function(t){this.willUnmount&&this.willUnmount(this,t)},u:function(t){this.g=!1,this.didUnmount&&this.didUnmount(this,t)},A:function(){this.p={},this._=0,this.didUpdate&&this.didUpdate(this)},react:function(t,n,i,r,o,u,e){var f,s=this,h=0==arguments.length;if(s.watched&&h)return s;if(i||h&&!e)return s.update&&(h||s._++,s.p[r]=o),s.M?void 0:(s.M=p(function(){s.react(void 0,void 0,void 0,void 0,void 0,void 0,!0)}),s);if(!u){if(n)for(var c in n)s[c]=n[c];this._w.Proxy||(s.watched=!1),null!=t&&(0!=s.watched?s.state=(f=function(t,n){s.react(void 0,void 0,!0,t,n)},new Proxy(t,{get:function(t,n){t=t[n];return"object"!=typeof t||null==t||t instanceof y||"_"==n[0]?t:new Proxy(t,this)},set:function(t,n,i){return t[n]=i,f(n,!0),!0},deleteProperty:function(t,n){return delete t[n],f(n,!1),!0}})):s.state=t)}s.M=null;var a=s.elems[0],v=!!a;if(!s.g&&!u){if(!v||!d(a))return s;s.g=!0}h=s.g&&u;if(!h&&s.update&&(!s.render||v&&a._h)&&!s.update(s.state,s,s.p,s._))return s.A(),s;if(h){var l=a.cloneNode(!0);l._h=s,l.i=a,s.v=[l]}else{l=s.render(s.state,s);if(!l)return s;(l=l instanceof y?l.elems[0]:l)._h=s,a?(a=_(l,a,a))&&(s.elems[0]=a):s.elems=[l],s.A()}return s}};function M(t,n,i){return new y(t,n,i)}return M.q=e,M.Component=y,M.version="1.0.6","undefined"!=typeof module&&module.exports?module.exports=M:"function"==typeof define?define(function(){return M}):t[t._caldom_alias||"_"]=M,M})();